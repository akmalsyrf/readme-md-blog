---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getTranslations, getLocaleFromPath } from '../../utils/i18n';
import { getPostsByLocale } from '../../utils/getPostsByLocale';
import HomeWelcome from '../../components/home/HomeWelcome.astro';
import HomeLatestPosts from '../../components/home/HomeLatestPosts.astro';

const currentPath = Astro.url.pathname;
const locale = getLocaleFromPath(currentPath);
const t = getTranslations(locale);

// Get blog posts - filter by locale
const allPosts = await getPostsByLocale(locale);
const posts = allPosts.slice(0, 5); // Show only latest 5 posts
---

<BaseLayout title={t.site.title} description={t.site.description}>
  <div class="relative z-10 mx-auto max-w-2xl px-4 py-16 sm:px-6 sm:py-24">
    <HomeWelcome locale={locale} />
    <HomeLatestPosts posts={posts} locale={locale} />
  </div>
</BaseLayout>

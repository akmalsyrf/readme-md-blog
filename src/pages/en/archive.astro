---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getTranslations, getLocaleFromPath } from '../../utils/i18n';
import { getPostsByLocale } from '../../utils/getPostsByLocale';
import ArchiveContent from '../../components/archive/ArchiveContent.astro';

const currentPath = Astro.url.pathname;
const locale = getLocaleFromPath(currentPath);
const t = getTranslations(locale);

// Get blog posts - filter by locale
const posts = await getPostsByLocale(locale);
---

<BaseLayout title={t.archive.title} description={t.archive.description}>
  <div class="container mx-auto px-4 py-12">
    <div class="mx-auto max-w-4xl">
      <h1 class="mb-4 text-4xl font-bold">{t.archive.title}</h1>
      <p class="mb-8 text-gray-600 dark:text-gray-400">{t.archive.description}</p>

      <ArchiveContent posts={posts} locale={locale} t={t} />
    </div>
  </div>
</BaseLayout>

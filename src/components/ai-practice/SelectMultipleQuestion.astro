---
interface Props {
  question: string;
  options: string[];
  correctAnswers: number[];
  explanation?: string;
  questionId: string;
}

const { question, options, correctAnswers, explanation, questionId } = Astro.props;
---

<div class="question-card">
  <div class="question-header">
    <span class="question-type-badge">Pilih Semua yang Benar</span>
    <p class="question-text">{question}</p>
  </div>
  <div class="question-options">
    {
      options.map((option, index) => (
        <label class="option-label">
          <input
            type="checkbox"
            name={`sm-${questionId}`}
            value={index}
            class="option-checkbox"
            data-correct={correctAnswers.includes(index)}
          />
          <span class="option-text">
            {String.fromCharCode(65 + index)}. {option}
          </span>
        </label>
      ))
    }
  </div>
  {
    explanation && (
      <div class="explanation" data-correct={correctAnswers.join(',')}>
        <strong>Jawaban yang benar:</strong>{' '}
        {correctAnswers.map((idx) => String.fromCharCode(65 + idx)).join(', ')}
        <br />
        <strong>Penjelasan:</strong> {explanation}
      </div>
    )
  }
</div>

<style>
  .question-card {
    @apply rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800;
    transition: all 0.2s;
  }

  .question-card:hover {
    @apply shadow-md;
  }

  .question-header {
    @apply mb-4;
  }

  .question-type-badge {
    @apply mb-2 inline-block rounded-full bg-orange-100 px-3 py-1 text-xs font-semibold text-orange-700 dark:bg-orange-900 dark:text-orange-300;
  }

  .question-text {
    @apply text-lg font-medium text-gray-900 dark:text-gray-100;
  }

  .question-options {
    @apply mt-4 flex flex-col gap-3;
  }

  .option-label {
    @apply flex cursor-pointer items-center gap-3 rounded-lg border-2 border-gray-200 p-4 transition-all hover:border-purple-300 hover:bg-purple-50 dark:border-gray-600 dark:hover:border-purple-600 dark:hover:bg-purple-900/20;
  }

  .option-checkbox {
    @apply h-5 w-5 cursor-pointer rounded text-purple-600 focus:ring-purple-500;
  }

  .option-text {
    @apply text-gray-700 dark:text-gray-300;
  }

  .explanation {
    @apply mt-4 rounded-lg border-l-4 border-green-500 bg-green-50 p-4 text-sm text-gray-700 dark:border-green-400 dark:bg-green-900/20 dark:text-gray-300;
    display: none;
  }

  .explanation.show {
    display: block;
  }
</style>

---
// Global styles for the layout
---

<style is:global>
  html {
    font-family: system-ui, sans-serif;
  }

  /* Smooth scroll - only if user prefers it */
  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }
  }

  /* Text selection styles - Light theme (teal, darker shade for contrast) */
  ::selection {
    background-color: rgb(13 148 136); /* teal-600 - darker for good contrast on light background */
    color: rgb(255 255 255); /* white */
  }

  ::-moz-selection {
    background-color: rgb(13 148 136); /* teal-600 - darker for good contrast on light background */
    color: rgb(255 255 255); /* white */
  }

  /* Text selection styles - Dark theme (teal, lighter shade for contrast) */
  .dark ::selection {
    background-color: rgb(45 212 191); /* teal-400 - lighter for good contrast on dark background */
    color: rgb(255 255 255); /* white - better readability on teal background */
  }

  .dark ::-moz-selection {
    background-color: rgb(45 212 191); /* teal-400 - lighter for good contrast on dark background */
    color: rgb(255 255 255); /* white - better readability on teal background */
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply rounded-full bg-gray-300 dark:bg-gray-600;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }

  /* Page Transition Animations */
  .page-transition {
    opacity: 0;
    will-change: opacity, transform;
    contain: layout style paint;
  }

  .page-enter {
    animation: pageFadeIn 0.35s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .page-exit {
    animation: pageFadeOut 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Optimize rendering performance */
  .page-transition.page-enter,
  .page-transition.page-exit {
    will-change: opacity, transform;
  }

  .page-transition:not(.page-enter):not(.page-exit) {
    will-change: auto;
  }

  @keyframes pageFadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pageFadeOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-8px);
    }
  }

  /* Smooth transitions for theme changes - but NOT on initial page load to prevent flash */
  html.theme-loaded body,
  html.theme-loaded body * {
    transition-property: background-color, border-color, color, fill, stroke, box-shadow;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 200ms;
  }

  /* Disable transitions on initial load to prevent flash */
  html:not(.theme-loaded) body,
  html:not(.theme-loaded) body * {
    transition: none !important;
  }

  /* Prevent animation on initial page load for better performance */
  @media (prefers-reduced-motion: reduce) {
    .page-transition,
    .page-enter,
    .page-exit {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }

  /* Optimize animations for better performance */
  .page-transition,
  .page-enter,
  .page-exit {
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Mobile Menu Styles */
  .mobile-menu {
    max-height: 0;
    opacity: 0;
    transform: translateY(-20px);
    transition:
      max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .mobile-menu.mobile-menu-open {
    max-height: 600px;
    opacity: 1;
    transform: translateY(0);
  }

  /* Mobile Menu Items Animation */
  .mobile-menu-item {
    opacity: 0;
    transform: translateX(-20px);
    transition:
      opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .mobile-menu-item.mobile-menu-item-visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* Hamburger Icon Animation */
  #mobile-menu-icon-open,
  #mobile-menu-icon-close {
    transition:
      opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
  }

  #mobile-menu-icon-open.opacity-0,
  #mobile-menu-icon-close.opacity-0 {
    opacity: 0;
  }

  #mobile-menu-icon-open.rotate-90 {
    transform: rotate(90deg) scale(0.8);
  }

  #mobile-menu-icon-close.rotate-90 {
    transform: rotate(90deg) scale(0.8);
  }

  /* Better touch targets for mobile */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Smooth transitions for mobile menu */
  .mobile-menu-link {
    min-height: 44px; /* Minimum touch target size */
    display: flex;
    align-items: center;
  }

  /* Prevent body scroll when menu is open on mobile */
  @media (max-width: 767px) {
    body.menu-open {
      overflow: hidden;
    }
  }
</style>
